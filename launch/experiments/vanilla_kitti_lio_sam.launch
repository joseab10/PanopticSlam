<launch>

    <!--
        Launch file for testing vanilla LIO-SAM with the KITTI RAW dataset converted to the corresponding
        KITTI ODOMETRY sequence ROSBag
    -->

    <arg name="project" default="lio_sam"/>

    <arg name="kitti_dataset_path" default="$(find panoptic_slam)/../../../dat/Kitti/"/>
    <arg name="kitti_sequence" default="8"/>
    <arg name="bag_file" default="raw_kitti.bag"/>

    <arg name="sim_pause" default="true"/>
    <arg name="sim_quiet" default="false"/>
    <arg name="sim_rate" default="1"/>

    <arg name="filter_feature_cloud" default="false"/>

    <!-- Parameters -->
    <param name="use_sim_time" value="true"/>
    <rosparam file="$(find panoptic_slam)/config/lio_sam/kitti_params.yaml" command="load" />

    <!-- Kitti ROSBag -->
    <include file="$(find panoptic_slam)/launch/simulation/kitti_play.launch">
        <arg name="kitti_dataset_path" value="$(arg kitti_dataset_path)"/>
        <arg name="kitti_sequence"     value="$(arg kitti_sequence)"/>
        <arg name="bag_file"           value="$(arg bag_file)"/>
        <arg name="sim_pause"          value="$(arg sim_pause)"/>
        <arg name="sim_quiet"          value="$(arg sim_quiet)"/>
        <arg name="sim_rate"           value="$(arg sim_rate)"/>
    </include>

    <!--- LOAM -->
    <include file="$(find lio_sam)/launch/include/module_loam.launch" />

    <!--- Robot State TF -->
    <include file="$(find lio_sam)/launch/include/module_robot_state_publisher.launch" />

    <!--- Run Navsat -->
    <include file="$(find lio_sam)/launch/include/module_navsat.launch" />

    <!--- Run Rviz-->
    <include file="$(find lio_sam)/launch/include/module_rviz.launch" />

</launch>